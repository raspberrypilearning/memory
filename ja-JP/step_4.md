## シーケンスを繰り返す

これで、プレーヤーがカラーシーケンスを繰り返すために押す4つのボタンを追加します。

\--- task \--- 4つのボタンを表すために、プロジェクトに4つの新しいスプライトを追加します。

+ 4色それぞれに1つのスプライトがあるように、新しいスプライトのコスチュームを編集します。
+ コスチュームと同じ順番でスプライトをステージ上に置きます: 赤、青、緑、黄

![スクリーンショット](images/colour-drums.png) \--- /task \---

\--- task \--- 赤いスプライトにコードを追加して、スプライトがクリックされたときに `ブロードキャスト`{:class="block3events"}キャラクターのスプライトに'赤'メッセージを送るようにします。

![レッドドラム](images/red_drum.png)

```blocks3
    このスプライトが押されたき
    (赤 v) を送る
```

\--- /task \---

`ブロードキャスト`{:class="block3events"}は、たとえば学校やスーパーマーケットで聞くことができる、スピーカーでアナウンスされたメッセージのようなものです。 すべてのスプライトは `ブロードキャスト`{：class = "block3events"}を聞くことができますが、応答するのが仕事であるスプライトだけが何かをします。

\--- task \---

青、緑、黄のスプライトに同様のコードを追加して、それぞれの色について `ブロードキャスト`{: class="block3events"}メッセージにします。

\--- /task \---

あなたは `ブロードキャスト`{: class="block3events"}がスピーカーのメッセージのようであることを覚えていますか？ `ブロードキャスト`{: class = "block3events"}メッセージに応答するのがキャラクタースプライトの仕事になるようにコードを追加します。

\--- task \---

キャラクタースプライトが`赤`{:class="block3events"}メッセージを受信したときに 、コードが数かどうかをチェックする必要が 数字の`1` が`シーケンス`{:class="block3variables"} リストの先頭であるかどうかチェックします(そうであればシーケンスの次の色は `赤`{:class="block3events"}であることを意味します) 。

`1` がリストの先頭にある場合、コードはリストから番号を削除する必要があります、なぜならばプレーヤーは正しい色を覚えていたからです。 さもなければそれはゲームオーバーであり、そしてコードはゲームを終了するために `すべて停止する`{:class="block3control"}必要があります。

![バレリーナ](images/ballerina.png)

```blocks3
[赤 v] を受け取ったとき
もし <([シーケンス vの(1 v) 番目)=[1] > なら
[シーケンスV] の(1 v) 番目を削除する
でなければ
[ゲームオーバー！] と(1) 秒言う
停止[すべて v]
終了
```

\--- /task \---

\--- task \--- キャラクタースプライトが正しい `ブロードキャスト`{:class="block3events"}を受信したときにドラムビートも再生するように、作成したコードに追加します。

\--- hints \--- \--- hint \--- 各ドラムに対応する数字を使って正しいドラムビートを演奏できますか。

+ 1 = 赤
+ 2 = 青
+ 3 = 緑
+ 4 = 黄 \--- /hint \--- \--- hint \--- 上の `シーケンスの1つを削除`{:class="block3variables"}ブロック 、`シーケンス`{:class=" block3variables "}リストの最初のサウンドを再生するための`ドラムを鳴らす`{:class="block3sound "}ブロック。

\--- /hint \--- \--- hint \--- これが追加が必要なコードです。

```blocks3
[red v] を受取ったとき
< ([シーケンス v] の(1 v) 番目) =[1] > なら

+(\(1\) スネアドラム v) のドラムを(0.25) 拍鳴らす
[シーケンス v] の(1 v) 番目を削除する
でなければ
(1) 秒間[ゲームオーバー！] と言う
[すべて v] を止める
終了

```

\--- /hint \--- \--- /hints \--- \--- /task \---

\--- task \--- キャラクタスプライトがメッセージ `red`{:class="block3events"}に応答するようにするために使用したコードを複製します。 複製したコードを変更して、メッセージ `blue`{:class="block3events"}を送信するようにします。 \--- /task \---

スプライトがメッセージ `blue`{:class="block3events"}に応答するとき、どのコードのビットが同じままで、どのビットが変わるべきか？ 各色には対応する番号があることに注意してください。

\--- task \--- キャラクタが `blue`{:class="block3events"}メッセージに正しく反応するように、キャラクタスプライトのコードを変更してください。

\--- hints \--- \--- hint \---

これらのブロックを保持しますが、何らかの方法で変更する必要があります。

![バレリーナ](images/ballerina.png)

```blocks3
< ([シーケンスv] の(1 v) 番目) = [1] >

[赤 v] を受取ったとき

(\(1\) スネアドラム v) のドラムを(0.25) 拍鳴らす
```

\--- /hint \--- \--- hint \--- 次が `blue`{:class="block3events"}ブロードキャストのためのコードです。

![バレリーナ](images/ballerina.png)

```blocks3
[青 v] を受取ったとき
もし <([シーケンス v] の(1 v) 番目) =[2] > なら
    (\(2\) バスドラム v) のドラムを(0.25) 拍鳴らす
    [シーケンス v] の(1 v) 番目を削除します
でなければ
    [ゲームオーバー！] と(1) 秒間言う
    [すべて v] を停止
終了
```

\--- /hint \--- \--- /hints \--- \--- /task \---

\--- task \--- コードを2回複製し(緑と黄のボタン用)、必要な部分を変更して、キャラクタが新しい `ブロードキャスト`{:class="block3events"}に正しく応答するようにします。 \--- /task \---

コードをテストすることを忘れないでください。あなたは5色のシーケンスを記憶することができますか？シーケンスは毎回異なりますか？

プレーヤーがカラーシーケンス全体を正しく繰り返すと、 `シーケンス`{:class="block3variables"}のリストが空になり、プレーヤーが勝利します。 必要に応じて、 `シーケンス`{:class="block3variables"}リストが空になったら、報酬としていくつかの点滅ライトを表示することもできます。

\--- task \--- flagがクリックされたとき、このコードをあなたのキャラクターの `最後に追加します`{：class = "block3events"}スクリプト：

![バレリーナ](images/ballerina.png)

```blocks3
    < ([シーケンス v] の長さ) = [0] > まで待つ
    (勝ち v) を送って待つ
```

\--- /task \---

\--- task \--- ステージに切り替えて、 `ドラムマシン` サウンドまたは他の好きなサウンドをインポートします。

[[[generic-scratch3-sound-from-library]]]

\--- /task \---

\--- task \--- このコードを追加すると、サウンドが再生され、プレーヤーの勝利時に背景の色が変わります。

![バレリーナ](images/stage.png)

```blocks3
    [勝ち v] を受取ったとき
    (ドラムマシン v) の音を鳴らす
   (50)  回繰り返す
        [色  v] の効果を(25) ずつ変える
        (0.1) 秒待つ
    終了
　画像効果をなくす
```

\--- /task \---