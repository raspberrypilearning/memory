## Рекорд

Теперь сохраняй рекорд, чтобы ты мог играть против своих друзей.

\--- task \---

Добавьте две новые переменные `рекорд`{:class="block3variables"} и `имя`{:class="block3variables"} в свой проект.

\--- /task \---

Когда игра заканчивается из-за того, что игрок выбирает неправильную последовательность, игра должна проверить, является ли счёт выше, чем текущий рекорд. Если это так, игра должна сохранить счёт как рекорд, а также сохранить имя игрока.

\--- task \---

Добавь код к спрайту персонажа, чтобы сохранить `рекорд`{:class="block3variables"}. Также запроси имя игрока и сохрани его в переменной `имя`{:class="block3variables"}.

[[[generic-scratch3-high-score]]]

\--- hints \---

\--- hint \---

Для своего нового кода следуй этому шаблону:

После сообщения `Конец игры`{:class="block3looks"} `если`{:class="block3control"} `счёт`{:class="block3variables"} `больше чем`{:class="block3operators"} `рекорд`{:class="block3variables"} `задать`{:class="block3variables"} `рекорд`{:class="block3variables"} значение `счёт`{:class="block3variables"} `спросить`{:class="block3sensing"} имя игрока `задать`{:class="block3variables"} `имя`{:class="block3variables"} значение `ответ`{:class="block3sensing"}

\--- /hint \---

\--- hint \---

Тебе нужны следующие блоки:

![балерина](images/ballerina.png)

```blocks3
если <> , то
конец

(счёт)

(счёт)

<[ ] > [ ]>

(ответ)

(рекорд)

спросить [Как тебя зовут?] и ждать

задать [рекорд v] значение [ ]

задать [имя v] значение [ ] 
```

\--- /hint \---

\--- hint \---

Твой код для красной кнопки должен выглядеть так:

![балерина](images/ballerina.png)

```blocks3
когда я получу [красный v]
если <(элемент (1 v) в [последовательность v]) = [1]> , то 
  барабану играть (элемент (1 v) в [список v]) (0.25) бита
  удалить (1 v) из [последовательность v]
иначе 
  говорить [Конец игры!] (1) секунд
  если <(счёт :: переменные) > (рекорд)> , то 
    задать [рекорд v] значение (счёт :: переменные)
    спросить [Рекорд! Как тебя зовут?] и ждать
    задать [имя v] значение (ответ)
  конец
стоп [все v]
конец
```

\--- /hint \---

\--- /hints \---

\--- /task \---

Добавь этот новый код в спрайт персонажа и для остальных трех цветов!

Код «Конец игры» для каждого из четырех цветов одинаков?

![балерина](images/ballerina.png)

```blocks3
говорить [Конец игры!] (1) секунд
если <(счёт :: переменные) > (рекорд)> , то 
  задать [рекорд v] значение (счёт :: переменные)
  спросить [Рекорд! Как тебя зовут?] и ждать
  задать [имя v] значение (ответ)
конец
стоп [все v]
```

Если нужно изменить код «Конец игры» - например, добавить звук или изменить сообщение «Конец игры» - тебе нужно будет изменить его четыре раза. Это раздражает и тратиться много времени.

Вместо этого ты можешь определить свой собственный блок кода и использовать его в любой части своего проекта.

\--- task \---

Нажми на `Мои блоки`{:class="block3myblocks"}, а затем на **Сделать Блок**. Назови этот новый блок `Конец игры`{:class="block3myblocks"}.

\--- /task \---

\--- task \---

Добавь код из блока `иначе`{:class="block3control"}, который связан с передачей `красного`{:class= "block3events"} сообщения в блок `Конец игры`{:class="block3myblocks"}, это должно выглядеть так:

![балерина](images/ballerina.png)

```blocks3
определить Конец игры
говорить [Конец игры!] (1) секунд
если <(счёт :: переменные) > (рекорд)> , то 
  задать [рекорд v] значение (счёт :: переменные)
  спросить [Рекорд! Как тебя зовут?] и ждать
задать [имя v] значение (ответ)
конец
стоп [все]
```

\--- /task \---

\--- task \---

Теперь удали код, который находится в блоке `иначе`{:class="block3control"}, связанным с передачей `красного`{:class="block3events"} сообщения, и добавь вместо этого в блок `Конец игры`{:class="block3myblocks"}:

![балерина](images/ballerina.png)

```blocks3
когда я получу [красный v]
если <(элемент (1 v) в [последовательность v]) = [1]> , то 
  барабану играть ((1) Малый барабан v) (0.25) бита
  удалить (1 v) из [последовательность v]
иначе 
  Конец игры :: пользовательский
конец
```

\--- /task \---

\--- task \---

Проверь свой новый блок, сыграв в игру и нажав на красную кнопку в неправильном месте цветовой последовательности.

\--- /task \---

Твой новый блок `Конец игры`{:class="block3myblocks"} является **функцией** - маленький скрипт, который ты можешь использовать в своем коде где угодно, добавив блок `Конец игры`{:class="block3myblocks"}.

\--- task \---

Также замени код блока `иначе`{:class="block3control"}, связанный с `передачей`{:class="block3events"} сообщений другим цветам, блоком `Конец игры`{:class="block3myblocks"}. Вот как должен выглядеть код для `синего`{:class="block3events"} сообщения

![балерина](images/ballerina.png)

```blocks3
когда я получу [синий v]
если <(элемент (1 v) в [последовательность v]) = [1]> то 
  барабану играть ((2) Большой Барабан v) (0.25) бита
  удалить (1 v) из [последовательность v]
иначе 
   Конец игры :: пользовательский
конец
```

\--- /task \---

\--- task \---

Теперь добавь звук, который воспроизводится при нажатии неправильной кнопки. Тебе нужно добавить этот код только один раз в блок `Конец игры`{:class="block3myblocks"}, а не четыре раза!

![балерина](images/ballerina.png)

```blocks3
определить Конец игры
включить звук [Кашель1 v]
говорить [Конец игры!] (1) секунд
если <(счёт :: переменные) > (рекорд)>  то 
  включить звук (труба1 v)
  задать [рекорд v] значение (счёт)
  ask [Рекорд! Как тебя зовут?] и ждать
задать [имя v] значение (ответ)
конец
стоп [все]
```

\--- /task \---