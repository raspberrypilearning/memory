## أعلى درجة

و الان لنقم بحفظ أعلى درجة حتى تتمكن من منافسة أصدقائك في اللعب.

--- task ---

أضف متغيرين جديدين إلى مشروعك أحدهما باسم `أعلى درجة`{:class="block3variables"} و الآخر باسم `اسم اللاعب`{:class="block3variables"}.

--- /task ---

عند انتهاء اللعبة بسبب أن اللاعب لم يتذكر تسلسل الألوان بشكل صحيح، يجب أن تقوم اللعبة بالتحقق هل الدرجة الحالية التي وصل إليها اللاعب أعلى من الدرجة السابقة أم لا. إذا كان الأمر كذلك، فيجب أن تقوم اللعبة بحفظ الدرجة الأعلى، و ايضا حفظ اسم اللاعب.

--- task ---

أضف تعليمة برمجية لكائن الشخصية الرئيسية لحفظ `أعلى درجة`{:class="block3variables"}. ايضا اسأل عن اسم اللاعب, و احفظه في المتغير `اسم اللاعب`{:class="block3variables"}.

[[[generic-scratch3-high-score]]]

--- hints ---


--- hint ---

يحتاج النص البرمجي الجديد الخاص بك إلى اتباع هذا النمط:

بعد `انتهت اللعبة!`{:class="block3looks"} رسالة `اذا`{:class="block3control"} كانت `الدرجة`{:class="block3variables"} `أعلى من`{:class="block3operators"} `أعلى درجة`{:class="block3variables"} `اجعل`{:class="block3variables"} `أعلى درجة`{:class="block3variables"} مساوياً `الدرجة`{:class="block3variables"} `اسأل`{:class="block3sensing"} عن اسم اللاعب `اجعل`{:class="block3variables"} ` اسم اللاعب`{:class="block3variables"} مساوياً `للاجابة`{:class="block3sensing"}

--- /hint ---

--- hint ---

ستحتاج الكتل البرمجية التالية:

![راقصة البالية](images/ballerina.png)

```blocks3
إذا <> :: control
end

(الدرجة)

(الدرجة)

<[ ] > [ ] :: operators>

(الإجابة :: sensing)

(أعلى درجة)

اسأل [ما هو اسمك؟] وانتظر :: sensing

اجعل [أعلى درجة v] مساويًا [ ] :: variables

اجعل [اسم اللاعب v] مساويًا [ ] :: variables 
```

--- hint/ ---

--- hint ---

لاحظ هنا كيف ستكون تعليماتك البرمجية عندما يتم الضغط على الزر الأحمر:

![راقصة البالية](images/ballerina.png)

```blocks3
عندما تستقبل [أحمر v] :: events
إذا <(العنصر (1 v) of [تسلسل v]) = [1] :: operators> 
  دقَّ الطبل (العنصر (1 v) من [تسلسل v] :: list) لمدة (0.25) وحدة إيقاع :: music
  احذف (1 v) من [تسلسل v] :: list

  قل [انتهت اللعبة!] لمدة (1) ثانية :: looks
  إذا <(الدرجة :: variables) > (أعلى درجة) :: operators> 
    اجعل [أعلى درجة v] مساويًا (الدرجة :: variables) :: variables
    اسأل [درجة عالية ! ما هو اسمك ؟] وانتظر :: sensing
    اجعل [اسم اللاعب v] مساويًا (الإجابة :: sensing) :: variables :: control
  end
  أوقف [الكل v] :: control :: control
end ما اسمك؟\] and wait
اجعل [name v] مساوياً (الإجابة)
end
أوقف [الكل v]

end
```

--- /hint ---

--- hints/ ---

--- /task ---

ستحتاج ايضاً إلى إضافة هذه التعليمات البرمجية الجديدة للألوان الثلاثة الآخرى!

هل لاحظت بأن التعليمة البرمجية الخاصة بحالة "انتهاء اللعبة" هي نفسها تماماً لجميع الألوان الأربعة؟

![راقصة البالية](images/ballerina.png)

```blocks3
قل [انتهت اللعبة !] لمدة (1) ثانية :: looks
إذا <(الدرجة :: variables) > (أعلى درجة) :: operators> 
  اجعل [أعلى درجة v] مساويًا (الدرجة :: variables) :: variables
  اسأل [درجة عالية ! ما هو اسمك ؟] وانتظر :: sensing
  اجعل [اسم اللاعب v] مساويًا (الإجابة :: sensing) :: variables :: control
end
أوقف [الكل v] :: control ما اسمك؟\] and wait
اجعل [name v] مساوياً (الإجابة)
end
أوقف [الكل v]

end
```

إذا أردت تغيير أي من التعليمات البرمجية الخاصة بحالة "انتهاء اللعبة"، على سبيل المثال إضافة صوت أو تغيير رسالة "انتهت اللعبة !"، فعليك أن تقوم بتغيرها أربع مرات، مرة لكل لون. و قد يكون هذا مزعج و فيه مضيعة للوقت.

بدلاً من ذلك، يمكنك تعريف مجموعاتك الخاصة من كتل التعليمات البرمجية، و إعادة استخدامها في أي مكان في مشروعك.

--- task ---

انقر على `لبنات`{:class="block3myblocks"}, ثم بعد ذلك **أنشاء لبنة**. و قم بتسميتها `انتهاء اللعبة`{:class="block3myblocks"}.

--- /task ---

--- task ---

أضف التعليمة البرمجية من كتلة `و إلا`{:class="block3control"} المتصلة بالكتلة الخاصة ببث اللون `أحمر`{:class="block3events"} إلى كتلة `انتهاء اللعبة`{:class="block3myblocks"} بحيث يصبح شكلها كالتالي:

![راقصة البالية](images/ballerina.png)

```blocks3
define انتهاء اللعبة
say [انتهت اللعبة !] for (1) seconds
if < (الدرجة :: variables) > (أعلى درجة) > then
    set [أعلى درجة v] to (الدرجة :: variables)
    ask [درجة عالية ! ما هو اسمك؟] and wait
    set [اسم اللاعب v] to (answer)
end
stop [all v] ما اسمك؟\] and wait
اجعل [name v] مساوياً (الإجابة)
end
أوقف [الكل v]

end
```

--- /task ---

--- task ---

و الان احذف التعليمات البرمجية الموجودة تحت كتلة `و إلا`{:class="block3control"} و المتصلة بالكتلة الخاصة ببث اللون `أحمر`{:class="block3events"} و أضفها بدلاً من ذلك إلى كتلة `انتهاء اللعبة`{:class="block3myblocks"}:

![راقصة البالية](images/ballerina.png)

```blocks3
عندما تستقبل [أحمر v] :: events
إذا <(العنصر (1 v) of [تسلسل v]) = [1] :: operators> 
  دقَّ الطبل ((1) Snare Drum v) لمدة (0.25) وحدة إيقاع :: music
  احذف (1 v) من [تسلسل v] :: list

  انتهاء اللعبة :: custom :: control
end
```

--- /task ---

--- task ---

اختبر الكتلة الجديدة عن طريق لعب اللعبة و الضغط على الزر الأحمر بشكل خاطىء أثناء تسلسل الألوان.

--- /task ---

نطلق على الكتلة الجديدة `انتهاء اللعبة`{:class="block3myblocks"} مسمى **وظيفة**, و هي عبارة عن نص برمجي قصير يمكنك استخدامه في أي مكان ترغبه ضمن التعليمات البرمجية و ذلك عن طريق اضافة اسم الكتلة البرمجية `انتهاء اللعبة`{:class="block3myblocks"}.

--- task ---

و الآن لنقم بالتعديل على الكتل الخاصة ببث بقية الألوان و ذلك عن طريق استبدال التعليمات البرمجية الموجودة تحت كتلة `و إلا`{:class="block3control"} الموجودة تحت كتل `البث`{:class="block3events"} الخاصة لكل لون بالكتلة البرمجية الجديدة `انتهاء اللعبة`{:class="block3myblocks"}. يفترض أن تبدو التعليمات البرمجية الخاصة باللون `أزرق`{:class="block3events"} بعد التعديل كالتالي

![راقصة البالية](images/ballerina.png)

```blocks3
عندما تستقبل [أزرق v] :: events
إذا <(العنصر (1 v) of [تسلسل v]) = [1] :: operators> 
  دقَّ الطبل ((2) Bass Drum v) لمدة (0.25) وحدة إيقاع :: music
  احذف (1 v) من [تسلسل v] :: list

  انتهاء اللعبة :: custom :: control
end
```

--- /task ---

--- task ---

و الآن أضف صوتاً يتم تشغيله عندما يتم الضغط على الزر الخطأ. ستحتاج إلى إضافة هذه التعليمة البرمجية مرة واحدة فقط في كتلة `انتهاء اللعبة`{:class="block3myblocks"} و التي انشئتها مسبقاً, و ليس أربع مرات لكل لون على حدة!

![راقصة البالية](images/ballerina.png)

```blocks3
تعريف انتهاء اللعبة
شغل الصوت [Cough1 v] :: sound
قل [انتهت اللعبة!] لمدة (1) ثانية :: looks
إذا <(الدرجة :: variables) > (أعلى درجة) :: operators> 
  شغل الصوت (trumpet1 v) :: sound
  اجعل [أعلى درجة v] مساويًا (الدرجة) :: variables
  اسأل [درجة عالية! ما هو اسمك?] وانتظر :: sensing
  اجعل [اسم اللاعب v] مساويًا (الإجابة :: sensing) :: variables :: control
end
أوقف [الكل v] :: control ما اسمك؟\] and wait
اجعل [name v] مساوياً (الإجابة)
end
أوقف [الكل v]
```

--- /task ---