## أعلى درجة

و الان لنقم بحفظ أعلى درجة حتى تتمكن من منافسة أصدقائك في اللعب.

--- task ---

أضف متغيرين جديدين إلى مشروعك أحدهما باسم `أعلى درجة`{:class="block3variables"} و الآخر باسم `اسم اللاعب`{:class="block3variables"}.

--- /task ---

عند انتهاء اللعبة بسبب أن اللاعب لم يتذكر تسلسل الألوان بشكل صحيح، يجب أن تقوم اللعبة بالتحقق هل الدرجة الحالية التي وصل إليها اللاعب أعلى من الدرجة السابقة أم لا. إذا كان الأمر كذلك، فيجب أن تقوم اللعبة بحفظ الدرجة الأعلى، و ايضا حفظ اسم اللاعب.

--- task ---

أضف تعليمة برمجية لكائن الشخصية الرئيسية لحفظ `أعلى درجة`{:class="block3variables"}. ايضا اسأل عن اسم اللاعب, و احفظه في المتغير `اسم اللاعب`{:class="block3variables"}.

[[[generic-scratch3-high-score]]]

--- hints ---


--- hint ---

يحتاج النص البرمجي الجديد الخاص بك إلى اتباع هذا النمط:

بعد `انتهت اللعبة!`{:class="block3looks"} رسالة `اذا`{:class="block3control"} كانت `الدرجة`{:class="block3variables"} `أعلى من`{:class="block3operators"} `أعلى درجة`{:class="block3variables"} `اجعل`{:class="block3variables"} `أعلى درجة`{:class="block3variables"} مساوياً `الدرجة`{:class="block3variables"} `اسأل`{:class="block3sensing"} عن اسم اللاعب `اجعل`{:class="block3variables"} `اسم اللاعب`{:class="block3variables"} مساوياً `للاجابة`{:class="block3sensing"}

--- /hint ---

--- hint ---

ستحتاج الكتل البرمجية التالية:

![راقصة البالية](images/ballerina.png)

```blocks3
إذا <> :: control
end

(الدرجة)

(الدرجة)

<[ ] > [ ] :: operators>

(الإجابة :: sensing)

(أعلى درجة)

اسأل [ما هو اسمك؟] وانتظر :: sensing

اجعل [أعلى درجة v] مساويًا [ ] :: variables

اجعل [اسم اللاعب v] مساويًا [ ] :: variables 
```

--- /hint ---

--- hint ---

لاحظ هنا كيف ستكون تعليماتك البرمجية عندما يتم الضغط على الزر الأحمر:

![راقصة البالية](images/ballerina.png)

```blocks3
وقتی که [أحمر v] را دریافت کردم
اگر <(عنصر (1 v) از [تسلسل v]) = [1]> آن گاه 
  به مدت (0.25) ضرب صدای (عنصر (1 v) از [تسلسل v]) را در ساز درامز پخش کن
  (1 v) را از [تسلسل v] حذف کن
وگر نه 
  [انتهت اللعبة!] را به مدت (1) ثانیه بگو
  اگر <(الدرجة :: variables) > (أعلى درجة)> آن گاه 
    [أعلى درجة v] را به (الدرجة :: variables) تنظیم کن
    [درجة عالية ! ما هو اسمك ؟] را بپرس و صبر کن
    [اسم اللاعب v] را به (پاسخ) تنظیم کن
  end
  توقف [الكل v]
end
```

--- /hint ---

--- /hints ---

--- /task ---

ستحتاج ايضاً إلى إضافة هذه التعليمات البرمجية الجديدة للألوان الثلاثة الآخرى!

هل لاحظت بأن التعليمة البرمجية الخاصة بحالة "انتهاء اللعبة" هي نفسها تماماً لجميع الألوان الأربعة؟

![راقصة البالية](images/ballerina.png)

```blocks3
قل [!انتهت اللعبة] لمدة (1) ثانية
إذا <(الدرجة :: variables) > (أعلى درجة)> 
  اجعل [أعلى درجة v] مساويًا (الدرجة :: variables)
  اسأل [درجة عالية ! ما هو اسمك ؟] وانتظر
  اجعل [اسم اللاعب v] مساويًا (الإجابة)
end
أوقف [الكل v]
```

إذا أردت تغيير أي من التعليمات البرمجية الخاصة بحالة "انتهاء اللعبة"، على سبيل المثال إضافة صوت أو تغيير رسالة "انتهت اللعبة !"، فعليك أن تقوم بتغيرها أربع مرات، مرة لكل لون. و قد يكون هذا مزعج و فيه مضيعة للوقت.

بدلاً من ذلك، يمكنك تعريف مجموعاتك الخاصة من كتل التعليمات البرمجية، و إعادة استخدامها في أي مكان في مشروعك.

--- task ---

انقر على `لبنات`{:class="block3myblocks"}, ثم بعد ذلك **أنشاء لبنة**. و قم بتسميتها `انتهاء اللعبة`{:class="block3myblocks"}.

--- /task ---

--- task ---

أضف التعليمة البرمجية من كتلة `و إلا`{:class="block3control"} المتصلة بالكتلة الخاصة ببث اللون `أحمر`{:class="block3events"} إلى كتلة `انتهاء اللعبة`{:class="block3myblocks"} بحيث يصبح شكلها كالتالي:

![راقصة البالية](images/ballerina.png)

```blocks3
عرِّف انتهت اللعبة
قل [انتهت اللعبة!] لمدة (1) ثانية
إذا <(الدرجة :: variables) > (أعلى درجة)> 
  اجعل [أعلى درجة v] مساويًا (الدرجة :: variables)
  اسأل [درجة عالية ! ما هو اسمك؟] وانتظر
  اجعل [اسم اللاعب v] مساويًا (الإجابة)
end
أوقف [الكل v]
```

--- /task ---

--- task ---

و الان احذف التعليمات البرمجية الموجودة تحت كتلة `و إلا`{:class="block3control"} و المتصلة بالكتلة الخاصة ببث اللون `أحمر`{:class="block3events"} و أضفها بدلاً من ذلك إلى كتلة `انتهاء اللعبة`{:class="block3myblocks"}:

![راقصة البالية](images/ballerina.png)

```blocks3
عندما أتلقى [أحمر v]
إذا <(العنصر (1 v) من [تسلسل v]) = [1]> 
  دقّ الطبل (\(1\) طبل جانبي v) لمدة (0.25) وحدة ايقاع
  احذف (1 v) من [تسلسل v]
وإلا 
  انتهاء اللعبة :: custom
end
```

--- /task ---

--- task ---

اختبر الكتلة الجديدة عن طريق لعب اللعبة و الضغط على الزر الأحمر بشكل خاطىء أثناء تسلسل الألوان.

--- /task ---

نطلق على الكتلة الجديدة `انتهاء اللعبة`{:class="block3myblocks"} مسمى **وظيفة**, و هي عبارة عن نص برمجي قصير يمكنك استخدامه في أي مكان ترغبه ضمن التعليمات البرمجية و ذلك عن طريق اضافة اسم الكتلة البرمجية `انتهاء اللعبة`{:class="block3myblocks"}.

--- task ---

و الآن لنقم بالتعديل على الكتل الخاصة ببث بقية الألوان و ذلك عن طريق استبدال التعليمات البرمجية الموجودة تحت كتلة `و إلا`{:class="block3control"} الموجودة تحت كتل `البث`{:class="block3events"} الخاصة لكل لون بالكتلة البرمجية الجديدة `انتهاء اللعبة`{:class="block3myblocks"}. يفترض أن تبدو التعليمات البرمجية الخاصة باللون `أزرق`{:class="block3events"} بعد التعديل كالتالي

![راقصة البالية](images/ballerina.png)

```blocks3
عندما أتلقى [أزرق v]
إذا <(العنصر (1 v) من [تسلسل v]) = [1]> 
  دقّ الطبل (\(2\) طبل كبیر v) لمدة (0.25) وحدة ايقاع
  احذف (1 v) من [تسلسل v]
وإلا 
  انتهاء اللعبة :: custom
end
```

--- /task ---

--- task ---

و الآن أضف صوتاً يتم تشغيله عندما يتم الضغط على الزر الخطأ. ستحتاج إلى إضافة هذه التعليمة البرمجية مرة واحدة فقط في كتلة `انتهاء اللعبة`{:class="block3myblocks"} و التي انشئتها مسبقاً, و ليس أربع مرات لكل لون على حدة!

![راقصة البالية](images/ballerina.png)

```blocks3
عرِّف انتهت اللعبة
ابدأ الصوت [Cough1 v]
قل [انتهت اللعبة!] لمدة (1) ثانية
إذا <(الدرجة :: variables) > (أعلى درجة)> 
  ابدأ الصوت (trumpet1 v)
  اجعل [أعلى درجة v] مساويًا (الدرجة)
  اسأل [درجة عالية! ما هو اسمك?] وانتظر
  اجعل [اسم اللاعب v] مساويًا (الإجابة)
end
أوقف [الكل v]
```

--- /task ---